local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local CoreGui = game:GetService("CoreGui")

local player = Players.LocalPlayer
local mouse = player:GetMouse()

-- Remote Event Tanımlaması (Orijinal koddan gelen)
local GuinRemote = game:GetService("ReplicatedStorage"):WaitForChild("GuinRemote")

-- Renk Paleti (Modern Neon Mor)
local THEME = {
    Main = Color3.fromRGB(15, 15, 20),
    Accent = Color3.fromRGB(145, 90, 230),
    Text = Color3.fromRGB(255, 255, 255),
    SecondaryText = Color3.fromRGB(180, 180, 180),
    Background = Color3.fromRGB(25, 25, 35),
    Outline = Color3.fromRGB(45, 45, 60)
}

-- Global Kontrol Değişkenleri
_G.Destruction = false
_G.AutoBuyHouse = false
_G.AutoAudio = false
_G.AutoKill = false
_G.SpamItems = false
_G.MenuVisible = true
_G.SelectedAudio = "14145620056" -- Varsayılan ses

-- GUI Oluşturma (Tüm Executorlar İçin Uyumluluk)
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "XenoHub_V2_Ultimate"
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local function ProtectGUI(gui)
    if gethui then
        gui.Parent = gethui()
    elseif syn and syn.protect_gui then
        syn.protect_gui(gui)
        gui.Parent = CoreGui
    else
        gui.Parent = CoreGui
    end
end
ProtectGUI(ScreenGui)

-- Ana Panel
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 600, 0, 450)
MainFrame.Position = UDim2.new(0.5, -300, 0.5, -225)
MainFrame.BackgroundColor3 = THEME.Main
MainFrame.BorderSizePixel = 0
MainFrame.ClipsDescendants = true
MainFrame.Parent = ScreenGui

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 12)
UICorner.Parent = MainFrame

local UIStroke = Instance.new("UIStroke")
UIStroke.Thickness = 2
UIStroke.Color = THEME.Accent
UIStroke.Transparency = 0.4
UIStroke.Parent = MainFrame

-- Yan Menü (Sidebar)
local Sidebar = Instance.new("Frame")
Sidebar.Name = "Sidebar"
Sidebar.Size = UDim2.new(0, 180, 1, 0)
Sidebar.BackgroundColor3 = THEME.Background
Sidebar.BorderSizePixel = 0
Sidebar.Parent = MainFrame

local SideCorner = Instance.new("UICorner")
SideCorner.CornerRadius = UDim.new(0, 12)
SideCorner.Parent = Sidebar

-- Başlık
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 60)
Title.BackgroundTransparency = 1
Title.Text = "XENOHUB V2"
Title.TextColor3 = THEME.Accent
Title.TextSize = 24
Title.Font = Enum.Font.GothamBold
Title.Parent = Sidebar

-- Buton Konteynırı
local ButtonList = Instance.new("ScrollingFrame")
ButtonList.Size = UDim2.new(1, -10, 1, -120)
ButtonList.Position = UDim2.new(0, 5, 0, 70)
ButtonList.BackgroundTransparency = 1
ButtonList.ScrollBarThickness = 0
ButtonList.Parent = Sidebar

local UIList = Instance.new("UIListLayout")
UIList.Padding = UDim.new(0, 6)
UIList.Parent = ButtonList

-- Alt Bilgi
local KeyInfo = Instance.new("TextLabel")
KeyInfo.Size = UDim2.new(1, 0, 0, 40)
KeyInfo.Position = UDim2.new(0, 0, 1, -45)
KeyInfo.BackgroundTransparency = 1
KeyInfo.Text = "[R-SHIFT] Menüyü Göster/Gizle"
KeyInfo.TextColor3 = THEME.SecondaryText
KeyInfo.TextSize = 12
KeyInfo.Font = Enum.Font.Gotham
KeyInfo.Parent = Sidebar

-- İçerik Alanı
local Container = Instance.new("Frame")
Container.Name = "Container"
Container.Size = UDim2.new(1, -200, 1, -20)
Container.Position = UDim2.new(0, 190, 0, 10)
Container.BackgroundTransparency = 1
Container.Parent = MainFrame

-- Fonksiyonlar: Sayfa Oluşturma
local function createTab(name)
    local TabButton = Instance.new("TextButton")
    TabButton.Size = UDim2.new(1, 0, 0, 42)
    TabButton.BackgroundColor3 = THEME.Main
    TabButton.BorderSizePixel = 0
    TabButton.Text = "   " .. name
    TabButton.TextColor3 = THEME.SecondaryText
    TabButton.TextSize = 14
    TabButton.Font = Enum.Font.GothamSemibold
    TabButton.TextXAlignment = Enum.TextXAlignment.Left
    TabButton.Parent = ButtonList

    local TabCorner = Instance.new("UICorner")
    TabCorner.CornerRadius = UDim.new(0, 8)
    TabCorner.Parent = TabButton

    local Page = Instance.new("ScrollingFrame")
    Page.Name = name .. "Page"
    Page.Size = UDim2.new(1, 0, 1, 0)
    Page.BackgroundTransparency = 1
    Page.Visible = false
    Page.ScrollBarThickness = 3
    Page.ScrollBarImageColor3 = THEME.Accent
    Page.Parent = Container

    local PageList = Instance.new("UIListLayout")
    PageList.Padding = UDim.new(0, 10)
    PageList.Parent = Page

    TabButton.MouseButton1Click:Connect(function()
        for _, v in pairs(Container:GetChildren()) do
            if v:IsA("ScrollingFrame") then v.Visible = false end
        end
        for _, v in pairs(ButtonList:GetChildren()) do
            if v:IsA("TextButton") then 
                TweenService:Create(v, TweenInfo.new(0.3), {TextColor3 = THEME.SecondaryText, BackgroundColor3 = THEME.Main}):Play()
            end
        end
        Page.Visible = true
        TweenService:Create(TabButton, TweenInfo.new(0.3), {TextColor3 = THEME.Text, BackgroundColor3 = THEME.Accent}):Play()
    end)

    return Page
end

-- Fonksiyonlar: Toggle Oluşturma
local function createToggle(parent, text, callback)
    local ToggleFrame = Instance.new("Frame")
    ToggleFrame.Size = UDim2.new(1, -10, 0, 48)
    ToggleFrame.BackgroundColor3 = THEME.Background
    ToggleFrame.BorderSizePixel = 0
    ToggleFrame.Parent = parent

    Instance.new("UICorner").CornerRadius = UDim.new(0, 8)
    ToggleFrame.UICorner.Parent = ToggleFrame

    local Label = Instance.new("TextLabel")
    Label.Size = UDim2.new(1, -65, 1, 0)
    Label.Position = UDim2.new(0, 15, 0, 0)
    Label.BackgroundTransparency = 1
    Label.Text = text
    Label.TextColor3 = THEME.Text
    Label.TextSize = 14
    Label.Font = Enum.Font.Gotham
    Label.TextXAlignment = Enum.TextXAlignment.Left
    Label.Parent = ToggleFrame

    local Box = Instance.new("Frame")
    Box.Size = UDim2.new(0, 42, 0, 24)
    Box.Position = UDim2.new(1, -55, 0.5, -12)
    Box.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    Box.Parent = ToggleFrame
    local BoxCor = Instance.new("UICorner")
    BoxCor.CornerRadius = UDim.new(1, 0)
    BoxCor.Parent = Box

    local Indicator = Instance.new("Frame")
    Indicator.Size = UDim2.new(0, 20, 0, 20)
    Indicator.Position = UDim2.new(0, 2, 0.5, -10)
    Indicator.BackgroundColor3 = Color3.fromRGB(220, 220, 220)
    Indicator.Parent = Box
    local IndCor = Instance.new("UICorner")
    IndCor.CornerRadius = UDim.new(1, 0)
    IndCor.Parent = Indicator

    local enabled = false
    ToggleFrame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            enabled = not enabled
            local targetPos = enabled and UDim2.new(1, -22, 0.5, -10) or UDim2.new(0, 2, 0.5, -10)
            local targetColor = enabled and THEME.Accent or Color3.fromRGB(45, 45, 45)
            
            TweenService:Create(Indicator, TweenInfo.new(0.25), {Position = targetPos}):Play()
            TweenService:Create(Box, TweenInfo.new(0.25), {BackgroundColor3 = targetColor}):Play()
            
            task.spawn(function() callback(enabled) end)
        end
    end)
end

-- Fonksiyonlar: Buton Oluşturma
local function createButton(parent, text, callback)
    local Btn = Instance.new("TextButton")
    Btn.Size = UDim2.new(1, -10, 0, 42)
    Btn.BackgroundColor3 = THEME.Background
    Btn.Text = text
    Btn.TextColor3 = THEME.Text
    Btn.Font = Enum.Font.GothamSemibold
    Btn.TextSize = 14
    Btn.Parent = parent
    
    Instance.new("UICorner").CornerRadius = UDim.new(0, 8)
    Btn.UICorner.Parent = Btn
    
    Btn.MouseButton1Click:Connect(function()
        local oldColor = Btn.BackgroundColor3
        Btn.BackgroundColor3 = THEME.Accent
        task.wait(0.1)
        Btn.BackgroundColor3 = oldColor
        task.spawn(callback)
    end)
end

-- Sayfalar
local MainTab = createTab("Ana Özellikler")
local ItemTab = createTab("Tüm Eşyalar")
local AudioTab = createTab("Ses Kontrol")
local VisualTab = createTab("Görsel & Oyuncu")

-- 1. ANA ÖZELLİKLER
createToggle(MainTab, "Yıkım Modu (Destruction Loop)", function(state)
    _G.Destruction = state
    while _G.Destruction do
        pcall(function()
            GuinRemote:FireServer(table.unpack({
                [1] = "Destruction", [2] = "Destruction", [3] = Vector3.new(0, -1, 0), [4] = Vector3.new(0, 0, 0),
                [5] = "Destruction", [6] = "Destruction", [7] = "Destruction", [8] = "Destruction",
                [9] = {[1] = true},
                [10] = {[1] = 25, [2] = Vector3.new(0.25, 0.25, 100), [3] = BrickColor.new('Bright yellow'), [4] = 0.25, [5] = Enum.Material.SmoothPlastic, [6] = 0.25},
                [11] = true, [12] = false
            }))
        end)
        task.wait(0.05)
    end
end)

createToggle(MainTab, "Tüm Evleri Otomatik Al", function(state)
    _G.AutoBuyHouse = state
    while _G.AutoBuyHouse do
        pcall(function()
            for i = 1, 30 do
                local houseName = "House" .. tostring(i)
                GuinRemote:FireServer(table.unpack({
                    [1] = houseName, [2] = houseName, [3] = Vector3.new(0, -1, 0), [4] = Vector3.new(0, 0, 0),
                    [5] = houseName, [6] = houseName, [7] = _G.SelectedAudio, [8] = _G.SelectedAudio,
                    [9] = {[1] = true}, [10] = {[1] = 25, [2] = Vector3.new(0.25, 0.25, 100)}, [11] = true, [12] = false
                }))
            end
        end)
        task.wait(0.5)
    end
end)

-- 2. TÜM EŞYALAR (FULL LİSTE)
local fullItems = {
    "Hammer", "Screwdriver", "Wrench", "Axe", "Saw", "Flashlight", "Pickaxe",
    "Sword", "Shield", "Gun", "Rifle", "Shotgun", "Sniper", "Medkit",
    "Apple", "BloxyCola", "Pizza", "Donut", "Taco",
    "CarSpawner", "Radio", "Bat", "Crowbar", "Knife", "Grenade", "C4"
}

createToggle(ItemTab, "Otomatik Eşya Doldur (Spam)", function(state)
    _G.SpamItems = state
    while _G.SpamItems do
        for _, item in pairs(fullItems) do
            if not _G.SpamItems then break end
            pcall(function()
                GuinRemote:FireServer(item, item, Vector3.new(0,0,0), Vector3.new(0,0,0), item)
            end)
            task.wait(0.02)
        end
        task.wait(0.1)
    end
end)

for _, item in pairs(fullItems) do
    createButton(ItemTab, item .. " Al", function()
        pcall(function()
            GuinRemote:FireServer(item, item, Vector3.new(0,0,0), Vector3.new(0,0,0), item)
        end)
    end)
end

-- 3. SES KONTROL
createToggle(AudioTab, "Sürekli Audio Loop", function(state)
    _G.AutoAudio = state
    while _G.AutoAudio do
        pcall(function()
            GuinRemote:FireServer("AudioPlay", _G.SelectedAudio)
        end)
        task.wait(0.5)
    end
end)

createButton(AudioTab, "Müziği Durdur", function()
    pcall(function() GuinRemote:FireServer("AudioStop") end)
end)

createButton(AudioTab, "XenoHub Sound Test", function()
    _G.SelectedAudio = "14145620056"
    pcall(function() GuinRemote:FireServer("AudioPlay", _G.SelectedAudio) end)
end)

-- 4. GÖRSEL & OYUNCU
createButton(VisualTab, "Süper Hız (WalkSpeed 100)", function()
    player.Character.Humanoid.WalkSpeed = 100
end)

createButton(VisualTab, "Süper Zıplama (JumpPower 150)", function()
    player.Character.Humanoid.JumpPower = 150
end)

createButton(VisualTab, "Karakter Resetle", function()
    player.Character:BreakJoints()
end)

createButton(VisualTab, "Karanlık Görüş (FullBright)", function()
    game:GetService("Lighting").Brightness = 2
    game:GetService("Lighting").ClockTime = 14
    game:GetService("Lighting").FogEnd = 100000
    game:GetService("Lighting").GlobalShadows = false
end)

-- Sürükleme Mantığı
local dragging, dragInput, dragStart, startPos
MainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = MainFrame.Position
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

RunService.RenderStepped:Connect(function()
    if dragging and dragInput then
        local delta = dragInput.Position - dragStart
        MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

-- Menü Kısayolu (RightShift)
UserInputService.InputBegan:Connect(function(input, gpe)
    if gpe then return end
    if input.KeyCode == Enum.KeyCode.RightShift then
        _G.MenuVisible = not _G.MenuVisible
        
        if _G.MenuVisible then
            MainFrame.Visible = true
            TweenService:Create(MainFrame, TweenInfo.new(0.4, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Size = UDim2.new(0, 600, 0, 450)}):Play()
        else
            local closeTween = TweenService:Create(MainFrame, TweenInfo.new(0.4, Enum.EasingStyle.Quart, Enum.EasingDirection.In), {Size = UDim2.new(0, 600, 0, 0)})
            closeTween:Play()
            closeTween.Completed:Connect(function()
                if not _G.MenuVisible then MainFrame.Visible = false end
            end)
        end
    end
end)

-- Başlangıç
MainFrame.Size = UDim2.new(0, 600, 0, 0)
TweenService:Create(MainFrame, TweenInfo.new(0.7, Enum.EasingStyle.Back), {Size = UDim2.new(0, 600, 0, 450)}):Play()
print("XenoHub V2 Ultimate Yüklendi! RightShift ile menüyü yönetebilirsiniz.")
