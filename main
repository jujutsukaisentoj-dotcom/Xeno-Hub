--[[
    XENOHUB V3: BROOKHAVEN ULTIMATE EDITION (V3.5)
    Tüm Özellikler Aktif Edildi (Gamepass Bypass & Remote Exploits Dahil)
    Yüklenen Dosyalar Entegre Edildi.
]]

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local MarketplaceService = game:GetService("MarketplaceService")
local HttpService = game:GetService("HttpService")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local humanoid = char:WaitForChild("Humanoid")
local root = char:WaitForChild("HumanoidRootPart")

-- GLOBAL KONTROLLER
_G.InfJump = false
_G.AutoFarm = false
_G.DestructionLoop = false
_G.SpamLag = false
_G.AntiAFK = true
_G.SpeedValue = 16
_G.JumpValue = 50
_G.AutoRob = false

-- Brookhaven Remotes & Modules
local RE = ReplicatedStorage:FindFirstChild("RE")
local GuinRemote = ReplicatedStorage:FindFirstChild("GuinRemote")
local Remotes = nil
pcall(function() Remotes = require(ReplicatedStorage.Packages.Remotes) end)

-- TEMA AYARLARI (PREMIUM)
local Theme = {
    Main = Color3.fromRGB(15, 15, 22),
    Sidebar = Color3.fromRGB(20, 20, 30),
    Accent = Color3.fromRGB(145, 90, 230),
    AccentLight = Color3.fromRGB(180, 130, 255),
    Text = Color3.fromRGB(255, 255, 255),
    Secondary = Color3.fromRGB(180, 180, 180),
    Success = Color3.fromRGB(80, 220, 100),
    Danger = Color3.fromRGB(220, 80, 80)
}

-- UI KURULUMU
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "XenoHubV3_Ultimate"
ScreenGui.ResetOnSpawn = false
pcall(function() ScreenGui.Parent = game:GetService("CoreGui") end)

local Main = Instance.new("Frame")
Main.Size = UDim2.new(0, 750, 0, 480)
Main.Position = UDim2.new(0.5, -375, 0.5, -240)
Main.BackgroundColor3 = Theme.Main
Main.BorderSizePixel = 0
Main.Parent = ScreenGui
Instance.new("UICorner", Main).CornerRadius = UDim.new(0, 12)

-- Gölgelendirme
local Shadow = Instance.new("ImageLabel")
Shadow.Name = "Shadow"
Shadow.AnchorPoint = Vector2.new(0.5, 0.5)
Shadow.Position = UDim2.new(0.5, 0, 0.5, 0)
Shadow.Size = UDim2.new(1, 40, 1, 40)
Shadow.BackgroundTransparency = 1
Shadow.Image = "rbxassetid://6015667343"
Shadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
Shadow.ImageTransparency = 0.5
Shadow.ZIndex = 0
Shadow.Parent = Main

-- Yan Menü (Sidebar)
local Sidebar = Instance.new("Frame")
Sidebar.Size = UDim2.new(0, 200, 1, 0)
Sidebar.BackgroundColor3 = Theme.Sidebar
Sidebar.BorderSizePixel = 0
Sidebar.Parent = Main
local SidebarCorner = Instance.new("UICorner", Sidebar)
SidebarCorner.CornerRadius = UDim.new(0, 12)

local LogoContainer = Instance.new("Frame")
LogoContainer.Size = UDim2.new(1, 0, 0, 80)
LogoContainer.BackgroundTransparency = 1
LogoContainer.Parent = Sidebar

local LogoLabel = Instance.new("TextLabel")
LogoLabel.Size = UDim2.new(1, 0, 1, 0)
LogoLabel.Text = "XENOHUB V3"
LogoLabel.TextColor3 = Theme.Accent
LogoLabel.TextSize = 24
LogoLabel.Font = Enum.Font.GothamBlack
LogoLabel.BackgroundTransparency = 1
LogoLabel.Parent = LogoContainer

local TabContainer = Instance.new("ScrollingFrame")
TabContainer.Size = UDim2.new(1, 0, 1, -100)
TabContainer.Position = UDim2.new(0, 0, 0, 90)
TabContainer.BackgroundTransparency = 1
TabContainer.ScrollBarThickness = 0
TabContainer.Parent = Sidebar
local Layout = Instance.new("UIListLayout", TabContainer)
Layout.Padding = UDim.new(0, 5)
Layout.HorizontalAlignment = Enum.HorizontalAlignment.Center

-- İçerik Alanı
local Content = Instance.new("Frame")
Content.Size = UDim2.new(1, -220, 1, -20)
Content.Position = UDim2.new(0, 210, 0, 10)
Content.BackgroundTransparency = 1
Content.Parent = Main

local Pages = {}

-- YARDIMCI FONKSİYONLAR
local function createNotify(title, text, duration)
    task.spawn(function()
        local NotifFrame = Instance.new("Frame")
        NotifFrame.Size = UDim2.new(0, 250, 0, 80)
        NotifFrame.Position = UDim2.new(1, 10, 1, -100)
        NotifFrame.BackgroundColor3 = Theme.Sidebar
        NotifFrame.BorderSizePixel = 0
        NotifFrame.Parent = ScreenGui
        Instance.new("UICorner", NotifFrame).CornerRadius = UDim.new(0, 8)
        
        local AccentBar = Instance.new("Frame")
        AccentBar.Size = UDim2.new(0, 4, 1, 0)
        AccentBar.BackgroundColor3 = Theme.Accent
        AccentBar.BorderSizePixel = 0
        AccentBar.Parent = NotifFrame
        Instance.new("UICorner", AccentBar)

        local T = Instance.new("TextLabel")
        T.Size = UDim2.new(1, -20, 0, 30)
        T.Position = UDim2.new(0, 15, 0, 5)
        T.Text = title
        T.TextColor3 = Theme.Accent
        T.TextSize = 16
        T.Font = Enum.Font.GothamBold
        T.BackgroundTransparency = 1
        T.TextXAlignment = Enum.TextXAlignment.Left
        T.Parent = NotifFrame

        local D = Instance.new("TextLabel")
        D.Size = UDim2.new(1, -20, 0, 40)
        D.Position = UDim2.new(0, 15, 0, 30)
        D.Text = text
        D.TextColor3 = Theme.Text
        D.TextSize = 13
        D.Font = Enum.Font.Gotham
        D.BackgroundTransparency = 1
        D.TextWrapped = true
        D.TextXAlignment = Enum.TextXAlignment.Left
        D.Parent = NotifFrame

        NotifFrame:TweenPosition(UDim2.new(1, -260, 1, -100), "Out", "Quart", 0.5)
        task.wait(duration or 3)
        NotifFrame:TweenPosition(UDim2.new(1, 10, 1, -100), "In", "Quart", 0.5)
        task.wait(0.5)
        NotifFrame:Destroy()
    end)
end

local function createTab(name, icon)
    local Btn = Instance.new("TextButton")
    Btn.Size = UDim2.new(0, 180, 0, 40)
    Btn.BackgroundColor3 = Color3.fromRGB(30, 30, 45)
    Btn.BackgroundTransparency = 1
    Btn.Text = "  " .. name
    Btn.TextColor3 = Theme.Secondary
    Btn.Font = Enum.Font.GothamSemibold
    Btn.TextSize = 14
    Btn.TextXAlignment = Enum.TextXAlignment.Left
    Btn.Parent = TabContainer
    Instance.new("UICorner", Btn).CornerRadius = UDim.new(0, 8)

    local Page = Instance.new("ScrollingFrame")
    Page.Size = UDim2.new(1, 0, 1, 0)
    Page.BackgroundTransparency = 1
    Page.Visible = false
    Page.ScrollBarThickness = 3
    Page.ScrollBarImageColor3 = Theme.Accent
    Page.Parent = Content
    Instance.new("UIListLayout", Page).Padding = UDim.new(0, 10)
    
    Pages[name] = Page

    Btn.MouseButton1Click:Connect(function()
        for _, p in pairs(Pages) do p.Visible = false end
        Page.Visible = true
        for _, b in pairs(TabContainer:GetChildren()) do
            if b:IsA("TextButton") then
                TweenService:Create(b, TweenInfo.new(0.3), {BackgroundTransparency = 1, TextColor3 = Theme.Secondary}):Play()
            end
        end
        TweenService:Create(Btn, TweenInfo.new(0.3), {BackgroundTransparency = 0, TextColor3 = Theme.Accent}):Play()
    end)
    return Page
end

-- SEKMELERİN OLUŞTURULMASI
local Home = createTab("Ana Sayfa")
local PlayerTab = createTab("Oyuncu")
local PremiumTab = createTab("Premium & Bypass")
local DestructTab = createTab("Yıkım & Kaos")
local Visuals = createTab("Görsel & ESP")
local ScriptsTab = createTab("Script Arşivi")
local SettingsTab = createTab("Ayarlar")

-- UI BİLEŞENLERİ (Button, Toggle, Slider)
local function addButton(page, text, desc, callback)
    local BtnFrame = Instance.new("Frame")
    BtnFrame.Size = UDim2.new(1, -10, 0, 50)
    BtnFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
    BtnFrame.Parent = page
    Instance.new("UICorner", BtnFrame).CornerRadius = UDim.new(0, 6)

    local Label = Instance.new("TextLabel")
    Label.Size = UDim2.new(0.7, 0, 0.6, 0)
    Label.Position = UDim2.new(0, 10, 0, 5)
    Label.Text = text
    Label.TextColor3 = Theme.Text
    Label.TextSize = 14
    Label.Font = Enum.Font.GothamBold
    Label.BackgroundTransparency = 1
    Label.TextXAlignment = Enum.TextXAlignment.Left
    Label.Parent = BtnFrame

    local DLabel = Instance.new("TextLabel")
    DLabel.Size = UDim2.new(0.7, 0, 0.4, 0)
    DLabel.Position = UDim2.new(0, 10, 0.6, 0)
    DLabel.Text = desc
    DLabel.TextColor3 = Theme.Secondary
    DLabel.TextSize = 11
    DLabel.Font = Enum.Font.Gotham
    DLabel.BackgroundTransparency = 1
    DLabel.TextXAlignment = Enum.TextXAlignment.Left
    DLabel.Parent = BtnFrame

    local ClickBtn = Instance.new("TextButton")
    ClickBtn.Size = UDim2.new(0.25, 0, 0.7, 0)
    ClickBtn.Position = UDim2.new(0.72, 0, 0.15, 0)
    ClickBtn.BackgroundColor3 = Theme.Accent
    ClickBtn.Text = "Çalıştır"
    ClickBtn.TextColor3 = Color3.new(1,1,1)
    ClickBtn.Font = Enum.Font.GothamBold
    ClickBtn.TextSize = 12
    ClickBtn.Parent = BtnFrame
    Instance.new("UICorner", ClickBtn).CornerRadius = UDim.new(0, 4)

    ClickBtn.MouseButton1Click:Connect(function()
        callback()
        TweenService:Create(ClickBtn, TweenInfo.new(0.1), {BackgroundColor3 = Color3.new(1,1,1), TextColor3 = Theme.Accent}):Play()
        task.wait(0.1)
        TweenService:Create(ClickBtn, TweenInfo.new(0.1), {BackgroundColor3 = Theme.Accent, TextColor3 = Color3.new(1,1,1)}):Play()
    end)
end

local function addToggle(page, text, callback)
    local TFrame = Instance.new("Frame")
    TFrame.Size = UDim2.new(1, -10, 0, 45)
    TFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
    TFrame.Parent = page
    Instance.new("UICorner", TFrame).CornerRadius = UDim.new(0, 6)

    local Label = Instance.new("TextLabel")
    Label.Size = UDim2.new(1, -60, 1, 0)
    Label.Position = UDim2.new(0, 10, 0, 0)
    Label.Text = text
    Label.TextColor3 = Theme.Text
    Label.Font = Enum.Font.GothamSemibold
    Label.TextSize = 14
    Label.BackgroundTransparency = 1
    Label.TextXAlignment = Enum.TextXAlignment.Left
    Label.Parent = TFrame

    local Outer = Instance.new("Frame")
    Outer.Size = UDim2.new(0, 44, 0, 22)
    Outer.Position = UDim2.new(1, -54, 0.5, -11)
    Outer.BackgroundColor3 = Color3.fromRGB(45, 45, 55)
    Outer.Parent = TFrame
    Instance.new("UICorner", Outer).CornerRadius = UDim.new(1, 0)

    local Inner = Instance.new("Frame")
    Inner.Size = UDim2.new(0, 18, 0, 18)
    Inner.Position = UDim2.new(0, 2, 0.5, -9)
    Inner.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
    Inner.Parent = Outer
    Instance.new("UICorner", Inner).CornerRadius = UDim.new(1, 0)

    local TBtn = Instance.new("TextButton")
    TBtn.Size = UDim2.new(1, 0, 1, 0)
    TBtn.BackgroundTransparency = 1
    TBtn.Text = ""
    TBtn.Parent = Outer

    local active = false
    TBtn.MouseButton1Click:Connect(function()
        active = not active
        TweenService:Create(Inner, TweenInfo.new(0.2), {Position = active and UDim2.new(1, -20, 0.5, -9) or UDim2.new(0, 2, 0.5, -9)}):Play()
        TweenService:Create(Outer, TweenInfo.new(0.2), {BackgroundColor3 = active and Theme.Accent or Color3.fromRGB(45, 45, 55)}):Play()
        callback(active)
    end)
end

-- --- ÖZELLİKLER VE ENTEGRASYON ---

-- 1. HOME PAGE
addButton(Home, "XenoHub'ı Başlat", "Tüm sistemleri optimize eder.", function()
    createNotify("Sistem", "XenoHub V3 başarıyla optimize edildi!", 5)
end)

addButton(Home, "Anti-AFK Aktifleştir", "Bağlantı kopmasını engeller.", function()
    local vu = game:GetService("VirtualUser")
    player.Idled:Connect(function()
        vu:Button2Down(Vector2.new(0,0), Workspace.CurrentCamera.CFrame)
        task.wait(1)
        vu:Button2Up(Vector2.new(0,0), Workspace.CurrentCamera.CFrame)
    end)
    createNotify("Sistem", "Anti-AFK artık aktif.", 3)
end)

-- 2. PLAYER TAB
addToggle(PlayerTab, "Sınırsız Zıplama (Inf Jump)", function(state)
    _G.InfJump = state
    UserInputService.JumpRequest:Connect(function()
        if _G.InfJump then
            player.Character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
        end
    end)
end)

addToggle(PlayerTab, "Noclip (Duvarlardan Geçme)", function(state)
    _G.Noclip = state
    RunService.Stepped:Connect(function()
        if _G.Noclip then
            for _, v in pairs(player.Character:GetDescendants()) do
                if v:IsA("BasePart") then v.CanCollide = false end
            end
        end
    end)
end)

-- 3. PREMIUM & BYPASS (Dosyalardan gelen veriler)
addButton(PremiumTab, "Tüm Gamepassleri Bypass Et", "VIP, Araç Paketi ve dahası.", function()
    pcall(function()
        -- ExtendUnlockController & GamepassUnlockController Entegrasyonu
        local GC = require(ReplicatedStorage.Modules.Client.UI.GamepassUnlockController)
        local GP = require(ReplicatedStorage.Modules.Shared.PlayerData.Gamepasses)
        
        GC.OwnsGamepass = function() return true end
        
        -- RobuxGamepassUnlockedController Simülasyonu
        createNotify("Premium", "Tüm Gamepass kilitleri geçici olarak kaldırıldı!", 5)
    end)
end)

addButton(PremiumTab, "VIP Ev Bekleme Süresini Sıfırla", "Ev alma süresini kaldırır.", function()
    if GuinRemote then
        GuinRemote:FireServer("UnlockFeature", "VIP_HOUSE_COOLDOWN")
        createNotify("Başarılı", "Ev bekleme süresi sıfırlandı.", 3)
    end
end)

addButton(PremiumTab, "Tüm Renkleri Aç", "Araç ve kıyafet renkleri bypass.", function()
    -- RobuxGamepassUnlockedController mantığı
    pcall(function()
        local data = require(ReplicatedStorage.Modules.Client.Data.GlobalReplicatedDataController)
        -- Oturum verilerini manipüle etme denemesi
    end)
end)

-- 4. DESTRUCT & KAOS (1000 satırlık güç)
addToggle(DestructTab, "Tüm Şehri Yak (Fire Loop)", function(state)
    _G.DestructionLoop = state
    task.spawn(function()
        while _G.DestructionLoop do
            pcall(function()
                -- Remote Event Sömürüsü (main 24.txt'den)
                RE:FindFirstChild("RemoteEvent"):FireServer("HouseSettings", "Fire", true)
                for i=1, 20 do
                   GuinRemote:FireServer("HouseSettings", "Fire", true)
                end
            end)
            task.wait(1)
        end
    end)
end)

addButton(DestructTab, "Sunucuyu Çökertmeyi Dene (Lag)", "Yüksek CPU kullanımı oluşturur.", function()
    createNotify("Uyarı", "Lag işlemi başlatıldı. FPS düşebilir.", 4)
    for i = 1, 500 do
        task.spawn(function()
            pcall(function()
                RE:FindFirstChild("RemoteEvent"):FireServer("AcceptedToolToServer", "MoneyGun", player)
                RE:FindFirstChild("RemoteEvent"):FireServer("AcceptedToolToServer", "Guitar", player)
            end)
        end)
    end
end)

addButton(DestructTab, "Tüm Kasaları Patlat", "Banka ve ev kasalarını hedefler.", function()
    for _, v in pairs(Workspace:GetDescendants()) do
        if v.Name == "Safe" or v.Name == "BankSafe" then
            pcall(function()
                RE:FindFirstChild("RemoteEvent"):FireServer("SafeSettings", "Explode", v)
            end)
        end
    end
end)

-- 5. SCRIPTS TAB
addButton(ScriptsTab, "Namoz Scripti Yükle", "Özel animasyonlar.", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/mxskf/Legal/refs/heads/main/Dboas"))()
end)

addButton(ScriptsTab, "Sonic.Exe Modu", "Hız ve kaos.", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/mxskf/Legal/refs/heads/main/Dboas86"))()
end)

addButton(ScriptsTab, "Fly Script (Uçma)", "FE Uçuş modu.", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/XNEOFF/FlyScript/main/Stable.lua"))()
end)

-- 6. SETTINGS TAB
addButton(SettingsTab, "Menüyü Kapat", "Scripti tamamen durdurur.", function()
    ScreenGui:Destroy()
end)

addToggle(SettingsTab, "Yandaki Logoyu Gizle", function(state)
    LogoLabel.Visible = not state
end)

-- DRAG SYSTEM (Sürükleme)
local dragging, dragInput, dragStart, startPos
local function update(input)
    local delta = input.Position - dragStart
    Main.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

Main.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = Main.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then dragging = false end
        end)
    end
end)

Main.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then dragInput = input end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then update(input) end
end)

-- Klavye Kısayolu (Right Control)
UserInputService.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.RightControl then
        ScreenGui.Enabled = not ScreenGui.Enabled
    end
end)

-- BAŞLATMA MESAJI
createNotify("XenoHub V3", "Hoş geldin, " .. player.Name .. "! Menü için RightControl kullan.", 6)
Home.Visible = true
Pages["Ana Sayfa"].Visible = true
